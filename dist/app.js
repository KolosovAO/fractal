!function(t){var e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=3)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.BaseFractal=class{constructor(t,e){this.events=e.events,delete e.events,this.config=this.getConfig(e),this.ctx=t,this.ctxDefaults(),this.ctxGlobals(),this.attachEvents(),this.draw=this.draw.bind(this),this.sequence=this.getSequence(),this.onInit(),this.start()}start(){!this.running&&this.sequence&&(this.running=!0,requestAnimationFrame(this.draw))}stop(){this.running=!1}refresh(){this.stop(),this.ctx.clearRect(0,0,this.config.width,this.config.height),this.sequence=this.getSequence(),this.onRefresh(),this.start()}destroy(){this.stop(),this.sequence=null,this.ctx.clearRect(0,0,this.config.width,this.config.height),this.destroyEvents()}updateConfig(t){this.config=Object.assign({},this.config,t),this.refresh()}getConfig(t){return Object.assign({},t,{width:innerWidth,height:innerHeight,drawCount:100})}getEvents(){return{}}ctxGlobals(){}onInit(){}onDrawEnd(){}onDrawStart(){}onRefresh(){}draw(){this.onDrawStart();let t=this.config.drawCount;for(;t&&this.running;){const e=this.sequence.next().value;if(!e)return this.onDrawEnd(),void this.stop();this.drawObject(e),t--}this.onDrawEnd(),this.running&&requestAnimationFrame(this.draw)}ctxDefaults(){this.ctx.lineWidth=1,this.ctx.strokeStyle="#000",this.ctx.fillStyle="#FFF",this.ctx.globalAlpha=1,this.ctx.font="24px Roboto"}attachEvents(){const t=this.getEvents();for(const e in t)this.events.on(e,t[e],this)}destroyEvents(){Object.keys(this.getEvents()).forEach(t=>{this.events.detach(t,this)})}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.mandelbrot="mandelbrot",t.tree="tree",t.plane="plane",t.koch="koh",t.spiral="spiral",t.midPoint="midPoint",t.universe="universe",t.randomPoint="randomPoint",t.circle="circle",t.dragon="dragon",t.levi="levi",t.randomLine="random",t.t="t",t.prime="prime",t.x="x"}(e.FractalType||(e.FractalType={})),function(t){t.click="click",t.zoomIn="zoomIn",t.zoomOut="zoomOut",t.showPopup="showPopup",t.showHelp="showHelp",t.requestConfig="requestConfig",t.updateConfig="updateConfig",t.hidePopup="hidePopup",t.showConfig="showConfig",t.refresh="refresh",t.resume="resume",t.next="next",t.download="download"}(e.FractalEvent||(e.FractalEvent={}))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(0);e.LeviFractal=class extends n.BaseFractal{getConfig(t){return Object.assign({},t,{drawCount:50,iterations:20})}ctxGlobals(){this.ctx.fillStyle="rgba(0, 0, 0, 0.7)"}getSequence(){return function*(t,e,i){const n=45*Math.PI/180,s=Math.cos(n),o=Math.sin(n);let r=[[{x:t/3,y:e/4},{x:2*t/3,y:e/4}]],a=-1;for(;++a<i;){const t=[];yield{clear:!0,iteration:a+1};for(let e=0;e<r.length;e++){const[i,n]=r[e];yield{a1:i,a2:n};const{x:a,y:c}=i,{x:h,y:l}=n,d=h-a,u=l-c,f={x:s*(d*s-u*o)+a,y:s*(d*o+u*s)+c};t.push([i,f],[f,n])}r=t}}(this.config.width,this.config.height,this.config.iterations)}onDrawStart(){this.ctx.beginPath()}onDrawEnd(){this.ctx.stroke()}drawObject({a1:t,a2:e,clear:i,iteration:n}){i?(this.ctx.stroke(),this.ctx.clearRect(0,0,this.config.width,this.config.height),this.ctx.fillText(n+" iteration",20,30),this.ctx.beginPath()):(this.ctx.moveTo(t.x,t.y),this.ctx.lineTo(e.x,e.y))}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(4);document.addEventListener("DOMContentLoaded",()=>{const t=document.querySelector("#app");new n.Application(t)})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(5),s=i(1),o=i(6),r=i(21),a=i(22);e.Application=class{constructor(t){this.canvas=t,this.ctx=t.getContext("2d"),this.events=new r.EventSystem;const e=window.innerWidth,i=window.innerHeight;t.style.width=e+"px",t.style.height=i+"px",this.width=t.width=e,this.height=t.height=i,this.popup=new n.Popup(document.body,this.events),this.configurator=new a.Configurator(document.body,this.events),this.fractalTitle=document.createElement("div"),this.fractalTitle.className="fractal-title",document.body.appendChild(this.fractalTitle),this.fractalHelperMessage=document.createElement("div"),this.fractalHelperMessage.className="fractal-helper-message",this.index=0,this.fractalTypes=Object.keys(s.FractalType),this.initHandlers(),this.nextFractal()}nextFractal(){this.fractalHelperMessageTimeout&&(clearTimeout(this.fractalHelperMessageTimeout),document.body.removeChild(this.fractalHelperMessage),this.fractalHelperMessageTimeout=null);const t=this.index%this.fractalTypes.length;this.fractal&&this.fractal.destroy();const e=this.fractalTypes[t];this.fractal=o.factory(s.FractalType[e],this.ctx,{width:this.width,height:this.height,events:this.events}),this.fractalTitle.textContent=e,this.index++}initHandlers(){this.events.on(s.FractalEvent.refresh,()=>this.fractal.refresh()),this.events.on(s.FractalEvent.resume,()=>this.fractal.start()),this.events.on(s.FractalEvent.next,()=>this.nextFractal()),this.events.on(s.FractalEvent.requestConfig,()=>{this.events.fire(s.FractalEvent.showConfig,[this.fractal.config])}),this.events.on(s.FractalEvent.download,()=>{const t=this.canvas.toDataURL("impage/png"),e=document.createElement("a");e.href=t,e.download="fractal_"+Date.now()%Math.pow(2,8)+".png",window.location.href=t,e.click(),this.fractal.start()}),this.events.on(s.FractalEvent.updateConfig,t=>{this.fractal.updateConfig(t)}),this.events.on(s.FractalEvent.showHelp,(t,e=3e3)=>{this.fractalHelperMessageTimeout&&(clearTimeout(this.fractalHelperMessageTimeout),document.body.removeChild(this.fractalHelperMessage)),this.fractalHelperMessage.textContent=t,document.body.appendChild(this.fractalHelperMessage),this.fractalHelperMessageTimeout=setTimeout(()=>{document.body.removeChild(this.fractalHelperMessage),this.fractalHelperMessageTimeout=null},e)}),this.canvas.addEventListener("click",t=>this.showMenu(t)),this.canvas.addEventListener("mousewheel",t=>{t.deltaY<0?this.events.fire(s.FractalEvent.zoomIn,[t.pageX,t.pageY]):this.events.fire(s.FractalEvent.zoomOut,[t.pageX,t.pageY])}),this.canvas.addEventListener("contextmenu",t=>{t.preventDefault(),this.showMenu(t)})}showMenu(t){this.configurator.isOpened()||(this.fractal.stop(),this.events.fire(s.FractalEvent.showPopup),this.events.fire(s.FractalEvent.click,[t]))}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(1);e.Popup=class{constructor(t,e){this.container=t,this.events=e,this.events.on(n.FractalEvent.showPopup,()=>this.show());const i=document.createElement("div");i.className="control",i.innerHTML='\n            <div id="show-config">show config</div>\n            <div id="resume">resume</div>\n            <div id="download">download</div>\n            <div id="refresh">refresh</div>\n            <div id="next">next fractal</div>\n        '.trim(),i.onclick=(t=>{switch(t.target.id){case"refresh":this.events.fire(n.FractalEvent.refresh),this.hide();break;case"resume":this.events.fire(n.FractalEvent.resume),this.hide();break;case"next":this.events.fire(n.FractalEvent.next),this.hide();break;case"show-config":this.events.fire(n.FractalEvent.requestConfig),this.hide();break;case"download":this.events.fire(n.FractalEvent.download),this.hide()}}),this.control=i}show(){this.opened||(this.opened=!0,this.container.appendChild(this.control))}hide(){this.opened&&(this.opened=!1,this.container.removeChild(this.control),this.events.fire(n.FractalEvent.hidePopup))}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(1),s=i(7),o=i(8),r=i(9),a=i(10),c=i(11),h=i(2),l=i(12),d=i(13),u=i(14),f=i(15),g=i(16),x=i(17),y=i(18),p=i(19),v=i(20);e.factory=function(t,e,i){switch(t){case n.FractalType.prime:return new s.PrimeFractal(e,i);case n.FractalType.randomLine:return new r.RandomLineFractal(e,i);case n.FractalType.t:return new o.TFractal(e,i);case n.FractalType.x:return new a.XFractal(e,i);case n.FractalType.mandelbrot:return new c.MandelbrotFractal(e,i);case n.FractalType.levi:return new h.LeviFractal(e,i);case n.FractalType.dragon:return new l.DragonFractal(e,i);case n.FractalType.koch:return new d.KochFractal(e,i);case n.FractalType.circle:return new u.CircleFractal(e,i);case n.FractalType.midPoint:return new f.MidPointFractal(e,i);case n.FractalType.plane:return new g.PlaneFractal(e,i);case n.FractalType.spiral:return new x.SpiralFractal(e,i);case n.FractalType.randomPoint:return new y.RandomPointFractal(e,i);case n.FractalType.universe:return new p.Universe(e,i);case n.FractalType.tree:return new v.TreeFractal(e,i)}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(0);e.PrimeFractal=class extends n.BaseFractal{getConfig(t){return Object.assign({},t,{drawCount:20,step:2})}getSequence(){return function*(t,e,i){let n=0,s=0,o=i,r=i,a=!0;for(;;){n>=t&&(o=-i),n<=0&&(o=i),s>=e&&(r=-i),s<=0&&(r=i);let c=n+o,h=s+r;a&&(yield{x1:n,y1:s,x2:c,y2:h}),a=!a,n=c,s=h}}(this.config.width,this.config.height,this.config.step)}onDrawStart(){this.ctx.beginPath()}onDrawEnd(){this.ctx.stroke()}drawObject({x1:t,y1:e,x2:i,y2:n}){this.ctx.moveTo(t,e),this.ctx.lineTo(i,n)}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(0);e.TFractal=class extends n.BaseFractal{getConfig(t){return Object.assign({},t,{drawCount:400})}getSequence(){return function*(t,e){let i=4;for(;;){for(let n=0;n<t;n+=i)for(let t=0;t<e;t+=i)yield{x:n,y:t,size:i};i+=4}}(this.config.width,this.config.height)}ctxGlobals(){this.ctx.strokeStyle="rgba(0,0,0,0.2)",this.ctx.lineWidth=8}onDrawStart(){this.ctx.beginPath()}onDrawEnd(){this.ctx.stroke()}drawObject({x:t,y:e,size:i}){this.ctx.rect(t,e,i,i)}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(0);function s(t){return Math.floor(Math.random()*t)}e.RandomLineFractal=class extends n.BaseFractal{getConfig(t){return Object.assign({},t,{drawCount:400,edges:3,pointSize:.2})}getSequence(){return function*(t,e,i){const n=[];for(let o=0;o<i;o++){const i={x:s(t),y:s(e)};yield i,n.push(i)}let o=n[s(i)];for(;;){const t=n[s(i)],e=(t.x+o.x)/2,r=(t.y+o.y)/2;yield o={x:e,y:r}}}(this.config.width,this.config.height,this.config.edges)}ctxGlobals(){this.ctx.fillStyle="#000"}drawObject({x:t,y:e}){this.ctx.beginPath(),this.ctx.arc(t,e,this.config.pointSize,0,2*Math.PI,!0),this.ctx.fill()}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(0);e.XFractal=class extends n.BaseFractal{getConfig(t){return Object.assign({},t,{drawCount:40})}getSequence(){return function*(t,e){let i=t,n=e,s=[{x:i/2,y:n/2,sizeX:i,sizeY:n}];for(;;){for(let t=0;t<s.length;t++)yield s[t];i/=2,n/=2,s=s.reduce((t,e)=>(t.push({x:e.x+i/2,y:e.y+n/2,sizeX:i,sizeY:n},{x:e.x-i/2,y:e.y-n/2,sizeX:i,sizeY:n},{x:e.x+i/2,y:e.y-n/2,sizeX:i,sizeY:n}),t),[])}}(this.config.width,this.config.height)}ctxGlobals(){this.ctx.lineWidth=.2}onDrawStart(){this.ctx.beginPath()}onDrawEnd(){this.ctx.stroke()}drawObject({x:t,y:e,sizeX:i,sizeY:n}){this.ctx.moveTo(t-i/2,e),this.ctx.lineTo(t+i/2,e),this.ctx.moveTo(t,e-n/2),this.ctx.lineTo(t,e+n/2)}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(1),s=i(0);e.MandelbrotFractal=class extends s.BaseFractal{constructor(){super(...arguments),this.scale=1}getConfig(t){return Object.assign({},t,{drawCount:2e4,xCoords:[-1.7,.5],yCoords:[-1.2,1.2],iterations:255,hue:220,saturation:.8})}onInit(){this.events.fire(n.FractalEvent.showHelp,["Use mousewheel for zoom in and zoom out"])}getSequence(){return function*(t,e,i,n,s,[r,a],[c,h]){const l=(a-r)/t,d=(h-c)/e,u=o(i,n,s);let f,g=-1;for(let t=r;t<a;t+=l){g++,f=0;for(let e=c;e<h;e+=d){let n=0,s=0,o=0;do{const i=s*o;s=s*s-o*o+t,o=2*i+e,n++}while(n<i&&s*s+o*o<4);const r=u[n];yield{x:g,y:f,color:r},f++}}}(this.config.width,this.config.height,this.config.iterations,this.config.hue,this.config.saturation,this.config.xCoords,this.config.yCoords)}getEvents(){return{[n.FractalEvent.zoomIn]:(t,e)=>this._scale(t,e,5),[n.FractalEvent.zoomOut]:(t,e)=>this._scale(t,e,.2)}}drawObject({x:t,y:e,color:i}){this.ctx.beginPath(),this.ctx.rect(t,e,1,1),this.ctx.fillStyle=i,this.ctx.fill()}_scale(t,e,i){this.scale/=i;const n=this.config.xCoords[1]-this.config.xCoords[0],s=this.config.yCoords[1]-this.config.yCoords[0],o=n*t/this.config.width+this.config.xCoords[0],r=s*e/this.config.height+this.config.yCoords[0];this.config.xCoords=[o-this.scale,o+this.scale],this.config.yCoords=[r-this.scale,r+this.scale],i>1?this.config.iterations+=50:this.config.iterations-=50,this.refresh()}};const o=(t,e,i)=>Array.from({length:t},(n,s)=>`hsl(${e},${100*i}%,${(t-s)/t*100}%)`)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(2);e.DragonFractal=class extends n.LeviFractal{getSequence(){return function*(t,e,i){const n=45*Math.PI/180,s=Math.cos(n),o=Math.sin(n);let r=[[{x:t/3,y:e/4},{x:2*t/3,y:e/4},1]],a=-1;for(;++a<i;){const t=[];yield{clear:!0,iteration:a+1};for(let e=0;e<r.length;e++){const[i,n,a]=r[e];yield{a1:i,a2:n};const{x:c,y:h}=i,{x:l,y:d}=n,u=l-c,f=d-h,g={x:s*(u*s-f*o*a)+c,y:s*(u*o*a+f*s)+h};t.push([i,g,1],[g,n,-1])}r=t}}(this.config.width,this.config.height,this.config.iterations)}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(0);e.KochFractal=class extends n.BaseFractal{getConfig(t){return Object.assign({},t,{drawCount:1,iterations:12})}ctxGlobals(){this.ctx.fillStyle="rgba(0, 0, 0, 0.7)"}getSequence(){return function*(t,e,i){const n=-Math.PI/3;let s=[{x1:t/3,y1:.675*e,x2:t/2,y2:.675*e-t*Math.sqrt(3)/6},{x1:t/2,y1:.675*e-t*Math.sqrt(3)/6,x2:2*t/3,y2:.675*e},{x1:2*t/3,y1:.675*e,x2:t/3,y2:.675*e}],o=-1;for(;++o<i;){yield{clear:!0,iteration:o};const t=[];for(let e=0;e<s.length;e++){yield s[e];const{x1:i,y1:o,x2:r,y2:a}=s[e],c=i+(r-i)/3,h=o+(a-o)/3,l=i+2*(r-i)/3,d=o+2*(a-o)/3,u=c+(l-c)*Math.cos(n)-(d-h)*Math.sin(n),f=h+(d-h)*Math.cos(n)+(l-c)*Math.sin(n);t.push({x1:i,y1:o,x2:c,y2:h},{x1:c,y1:h,x2:u,y2:f},{x1:u,y1:f,x2:l,y2:d},{x1:l,y1:d,x2:r,y2:a})}s=t}}(this.config.width,this.config.height,this.config.iterations)}onDrawStart(){this.ctx.beginPath()}onDrawEnd(){this.ctx.stroke()}drawObject({x1:t,y1:e,x2:i,y2:n,clear:s,iteration:o}){s?(this.ctx.stroke(),this.ctx.clearRect(0,0,this.config.width,this.config.height),this.ctx.fillText(o+" iteration",20,30),this.ctx.beginPath()):(this.ctx.moveTo(t,e),this.ctx.lineTo(i,n))}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(0);e.CircleFractal=class extends n.BaseFractal{getConfig(t){return Object.assign({},t,{drawCount:1,points:360})}getSequence(){return function*(t,e,i){const n={x:t/2,y:e/2},s=e/2-40,o=t=>{const e=t%i/i;return{x:n.x+Math.cos(2*Math.PI*e)*s,y:n.y+Math.sin(2*Math.PI*e)*s}};let r=2;for(;;){for(let t=1;t<i;t++)yield{a1:o(t),a2:o(t*r)};r++,yield{clear:!0}}}(this.config.width,this.config.height,this.config.points)}onDrawStart(){this.ctx.beginPath()}onDrawEnd(){this.ctx.stroke()}drawObject({a1:t,a2:e,clear:i}){i?(this.ctx.stroke(),this.ctx.clearRect(0,0,this.config.width,this.config.height),this.ctx.beginPath()):(this.ctx.moveTo(t.x,t.y),this.ctx.lineTo(e.x,e.y))}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(0);e.MidPointFractal=class extends n.BaseFractal{getConfig(t){return Object.assign({},t,{drawCount:1,roughness:.8})}ctxGlobals(){this.ctx.fillStyle="#000"}getSequence(){return function*(t,e,i){const n=Math.pow(2,~~Math.log2(t))+1,s=t=>-.5*t+Math.random()*t,o=[];o[0]=s(e),o[n-1]=s(e),yield{x:0,y:o[0]+e/2},yield{x:n,y:o[n]+e/2};let r=n>>1;for(;r>=1;){for(let t=r;t<n;t+=2*r)o[t]=(o[t-r]+o[t+r])/2+s(r*i),yield{x:t,y:o[t]+e/2};r>>=1}}(this.config.width,this.config.height,this.config.roughness)}drawObject({x:t,y:e}){this.ctx.beginPath(),this.ctx.arc(t,e,1,0,2*Math.PI,!0),this.ctx.fill()}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(0);e.PlaneFractal=class extends n.BaseFractal{getConfig(t){return Object.assign({},t,{drawCount:250,roughness:1.2})}getSequence(){return function*(t,e,i){const n=Math.pow(2,~~Math.log2(e))+1,s=Array.from({length:n},t=>Array.from({length:n})),o=(t-n)/2,r=(e-n)/2,a=t=>-.5*t+Math.random()*t,c=(...t)=>t.reduce((t,e)=>t+e)/t.length,h=t=>~~(t/333*255),l=t=>{let e=0,i=0,n=0;switch(!0){case(t+=500)<333:n=h(t);break;case t<666:i=h(t-333);break;default:e=h(t-667)}return`rgb(${e},${i},${n})`};s[0][0]=a(1e3),s[0][n-1]=a(1e3),s[n-1][0]=a(1e3),s[n-1][n-1]=a(1e3),yield{x:o,y:r,color:l(s[0][0])},yield{x:o,y:n-1+r,color:l(s[0][n-1])},yield{x:n-1+o,y:r,color:l(s[n-1][0])},yield{x:n-1+o,y:n-1+r,color:l(s[n-1][n-1])};let d=n>>1;function*u(t){for(let e=d;e<n;e+=2*d)for(let s=d;s<n;s+=2*d)t[e][s]=c(t[e-d][s-d],t[e-d][s+d],t[e+d][s-d],t[e+d][s+d])+a(1e3)/n*d*i,yield{x:e+o,y:s+r,color:l(t[e][s])}}function*f(t){for(let e=0;e<n;e+=d)for(let s=0;s<n;s+=d){if(t[e][s])continue;const h=[];t[e-d]&&h.push(t[e-d][s]),t[e+d]&&h.push(t[e+d][s]),t[e][s-d]&&h.push(t[e][s-d]),t[e][s+d]&&h.push(t[e][s+d]),t[e][s]=c(...h)+a(1e3)/n*d*i,yield{x:e+o,y:s+r,color:l(t[e][s])}}}for(;d>=1;){const t=u(s);for(const e of t)yield e;const e=f(s);for(const t of e)yield t;d>>=1}}(this.config.width,this.config.height,this.config.roughness)}drawObject({x:t,y:e,color:i}){this.ctx.beginPath(),this.ctx.fillStyle=i,this.ctx.arc(t,e,1,0,2*Math.PI,!0),this.ctx.fill()}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(0);e.SpiralFractal=class extends n.BaseFractal{getConfig(t){return Object.assign({},t,{drawCount:50})}getSequence(){return function*(t,e){const i=t/2,n=e/2;let s={x:i,y:n};for(let t=0;t<4e3;t++){const e=.1*t,o={x:i+(1+e)*Math.cos(e),y:n+(1+e)*Math.sin(e)};yield{a1:s,a2:o},s=o}}(this.config.width,this.config.height)}onDrawStart(){this.ctx.beginPath()}onDrawEnd(){this.ctx.stroke()}drawObject({a1:t,a2:e}){this.ctx.moveTo(t.x,t.y),this.ctx.lineTo(e.x,e.y)}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(0);e.RandomPointFractal=class extends n.BaseFractal{getConfig(t){return Object.assign({},t,{drawCount:400,radius:5})}ctxGlobals(){this.ctx.fillStyle="rgba(0, 0, 0, 0.7)"}getSequence(){return function*(t,e,i){let n=t/2,s=e/2;for(yield{x:n,y:s};;){const o=Math.random(),r=n+Math.cos(2*Math.PI*o)*i,a=s+Math.sin(2*Math.PI*o)*i;r>t||a>e||r<0||a<0||(yield{x:n=r,y:s=a})}}(this.config.width,this.config.height,this.config.radius)}drawObject({x:t,y:e}){this.ctx.beginPath(),this.ctx.arc(t,e,1,0,2*Math.PI,!0),this.ctx.fill()}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(0);function s(t,e){return t+Math.round(Math.random()*(e-t))}e.Universe=class extends n.BaseFractal{getConfig(t){return Object.assign({},t,{drawCount:100})}ctxGlobals(){this.ctx.fillStyle="rgba(0, 0, 0, 0.8)",this.ctx.fillRect(0,0,this.config.width,this.config.height)}getSequence(){return function*(t,e){const i={x:t/2,y:e/2,radius:40,ring:100,color:255};yield i;let n=[i];for(;n.length<1e4;){const i=[];for(let o=0;o<n.length;o++){const{x:r,y:a,radius:c,color:h,ring:l}=n[o],d=s(1,8);for(let n=0;n<d;n++){const o=(n+1)/d,u={x:r+Math.cos(2*Math.PI*o)*l,y:a+Math.sin(2*Math.PI*o)*l,radius:s(c/6,c),color:Math.round(h/(1+.3*Math.random())),ring:Math.round(h/(1+Math.random()))};u.x>t||u.x<0||u.y>e||u.y<0||(i.push(u),yield u)}}n=i}}(this.config.width,this.config.height)}onRefresh(){this.ctx.fillStyle="rgba(0, 0, 0, 0.8)",this.ctx.fillRect(0,0,this.config.width,this.config.height)}drawObject({x:t,y:e,radius:i,color:n}){this.ctx.beginPath(),this.ctx.fillStyle=`rgba(${n}, ${n}, ${n}, 0.5)`,this.ctx.arc(t,e,i,0,2*Math.PI,!0),this.ctx.fill()}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(0);e.TreeFractal=class extends n.BaseFractal{getConfig(t){return Object.assign({},t,{drawCount:1,angle:60})}ctxGlobals(){this.ctx.fillStyle="rgba(0, 0, 0, 0.8)",this.ctx.strokeStyle="#fff",this.ctx.fillRect(0,0,this.config.width,this.config.height)}getSequence(){return function*(t,e,i){let n=.6*e,s=15;i=Math.PI*i/180;let o=[{x1:t/2,y1:e,x2:t/2,y2:e-n,angle:Math.PI/2,lineWidth:s}];for(;n>1;){n/=1.8,s/=1.4;const t=[];for(const e of o)yield e,t.push({x1:e.x2,y1:e.y2,x2:e.x2+n*Math.cos(e.angle+i),y2:e.y2+n*Math.sin(e.angle+i),lineWidth:s,angle:e.angle+i},{x1:e.x2,y1:e.y2,x2:e.x2+n*Math.cos(e.angle-i),y2:e.y2+n*Math.sin(e.angle-i),lineWidth:s,angle:e.angle-i});o=t}}(this.config.width,this.config.height,this.config.angle)}onDrawStart(){this.ctx.beginPath()}onDrawEnd(){this.ctx.stroke()}onRefresh(){this.ctx.fillRect(0,0,this.config.width,this.config.height)}drawObject({x1:t,x2:e,y1:i,y2:n,lineWidth:s}){this.ctx.lineWidth=s,this.ctx.moveTo(t,i),this.ctx.lineTo(e,n)}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.EventSystem=class{constructor(t){this.events={},this.context=t||this}on(t,e,i){this.events[t]=this.events[t]||[],this.events[t].push({callback:e,context:i||this.context})}detach(t,e){this.events[t]&&(this.events[t]=e?this.events[t].filter(t=>t.context!==e):[])}fire(t,e){return void 0===e&&(e=[]),!this.events[t]||this.events[t].map(t=>t.callback.apply(t.context,e)).indexOf(!1)<0}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(1);e.Configurator=class{constructor(t,e){this.container=t,this.events=e,this.inputs=[],this.events.on(n.FractalEvent.showConfig,t=>this.show(t))}isOpened(){return this.opened}show(t){if(this.opened)return;this.opened=!0;const e=[],i=this.configurator=document.createElement("div");i.className="configurator";for(const n in t){if(t[n]instanceof Object)continue;const s=document.createElement("div");s.className="property-wrapper";const o=document.createElement("div");o.className="property-name",o.textContent=n;const r=document.createElement("input");r.id=n,r.value=t[n],e.push(r),"width"!==n&&"height"!==n||(r.readOnly=!0),s.appendChild(o),s.appendChild(r),i.appendChild(s)}this.inputs=e;const s=document.createElement("div");s.className="buttons-block";const o=document.createElement("button");o.textContent="update",o.onclick=(()=>{this.events.fire(n.FractalEvent.updateConfig,[this.getConfig()]),this.hide()});const r=document.createElement("button");r.onclick=(()=>{this.events.fire(n.FractalEvent.resume),this.hide()}),r.textContent="close",s.appendChild(o),s.appendChild(r),i.appendChild(s),this.container.appendChild(i)}hide(){this.opened=!1,this.inputs=[],this.container.removeChild(this.configurator)}getConfig(){const t={};for(const e of this.inputs)t[e.id]=+e.value;return t}}}]);