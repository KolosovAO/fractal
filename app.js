!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=4)}([function(t,e,n){"use strict";var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,s){function r(t){try{a(i.next(t))}catch(t){s(t)}}function c(t){try{a(i.throw(t))}catch(t){s(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,c)}a((i=i.apply(t,e||[])).next())}))},o=this&&this.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(t);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(n[i[o]]=t[i[o]])}return n};Object.defineProperty(e,"__esModule",{value:!0});const s=n(2),r=100;e.BaseFractal=class{constructor(t,e){this.startDrawLoop=()=>{this.onDrawStart();let t=this.config.drawCount;for(;t&&this.running;){const e=this.sequence.next().value;if(!e)return this.onDrawEnd(),void this.stop();this.drawObject(e),t--}this.onDrawEnd(),this.running&&requestAnimationFrame(this.startDrawLoop)};const{events:n}=e,i=o(e,["events"]);this.events=n,this.config=Object.assign(Object.assign({drawCount:r},i),this.getOwnConfig()),this.ctx=t,this.ctxDefaults(),this.ctxGlobals(),this.attachEvents(),this.clear(),this.init()}getConfigHints(){return{}}start(){!this.running&&this.sequence&&(this.running=!0,requestAnimationFrame(this.startDrawLoop))}stop(){this.running=!1}refresh(){return i(this,void 0,void 0,(function*(){this.sequence=yield this.getSequence(),this.stop(),this.clear(),this.onRefresh(),this.start()}))}destroy(){this.stop(),this.sequence=null,this.ctx.clearRect(0,0,this.config.width,this.config.height),this.destroyEvents()}updateConfig(t){this.config=Object.assign(Object.assign({},this.config),t),this.refresh()}clear(){"night"===this.getMode()?(this.ctx.fillStyle="#000",this.ctx.fillRect(0,0,this.config.width,this.config.height)):this.ctx.clearRect(0,0,this.config.width,this.config.height)}getMode(){return"default"}getOwnConfig(){return{}}getEvents(){return{}}ctxGlobals(){}onInit(){}onDrawEnd(){}onDrawStart(){}onRefresh(){}init(){return i(this,void 0,void 0,(function*(){this.sequence=yield this.getSequence(),this.onInit(),this.start()}))}ctxDefaults(){this.ctx.lineWidth=1,"night"===this.getMode()?(this.ctx.strokeStyle="#FFF",this.ctx.fillStyle="rgba(0, 0, 0, 0.8)"):(this.ctx.strokeStyle="rgba(0, 0, 0, 0.8)",this.ctx.fillStyle="#FFF"),this.ctx.globalAlpha=1,this.ctx.font="24px Roboto"}attachEvents(){const t=this.getEvents();s.objectKeys(t).forEach(e=>{this.events.on(e,t[e],this)})}destroyEvents(){const t=this.getEvents();s.objectKeys(t).forEach(t=>{this.events.detach(t,this)})}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.mandelbrot="mandelbrot",t.primeNumber="primeNumber",t.tree="tree",t.pythagorasTree="pythagorasTree",t.plane="plane",t.koch="koh",t.circle="circle",t.t="t",t.dragon="dragon",t.levi="levi",t.spiral="spiral",t.universe="universe",t.randomPoint="randomPoint",t.serpinski="serpinski",t.prime="prime",t.x="x"}(e.FractalType||(e.FractalType={})),function(t){t.click="click",t.zoomIn="zoomIn",t.zoomOut="zoomOut",t.showPopup="showPopup",t.showHelp="showHelp",t.requestConfig="requestConfig",t.updateConfig="updateConfig",t.hidePopup="hidePopup",t.showConfig="showConfig",t.refresh="refresh",t.resume="resume",t.next="next",t.download="download"}(e.FractalEvent||(e.FractalEvent={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.objectKeys=t=>Object.keys(t)},function(t,e,n){"use strict";var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,s){function r(t){try{a(i.next(t))}catch(t){s(t)}}function c(t){try{a(i.throw(t))}catch(t){s(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,c)}a((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const o=n(0);class s extends o.BaseFractal{getOwnConfig(){return{drawCount:50,iterations:20}}ctxGlobals(){this.ctx.fillStyle="rgba(0, 0, 0, 0.7)"}getSequence(){return i(this,void 0,void 0,(function*(){return function*(t,e,n){const i=45*Math.PI/180,o=Math.cos(i),s=Math.sin(i);let r=[[{x:t/3,y:e/4},{x:2*t/3,y:e/4}]],c=-1;for(;++c<n;){const t=[];yield{clear:!0,iteration:c+1};for(let e=0;e<r.length;e++){const[n,i]=r[e];yield{p1:n,p2:i};const{x:c,y:a}=n,{x:h,y:l}=i,u=h-c,f=l-a,d={x:o*(u*o-f*s)+c,y:o*(u*s+f*o)+a};t.push([n,d],[d,i])}r=t}}(this.config.width,this.config.height,this.config.iterations)}))}onDrawStart(){this.ctx.beginPath()}onDrawEnd(){this.ctx.stroke()}drawObject({p1:t,p2:e,clear:n,iteration:i}){n?(this.ctx.stroke(),this.clear(),this.ctx.fillText(i+" iteration",20,30),this.ctx.beginPath()):(this.ctx.moveTo(t.x,t.y),this.ctx.lineTo(e.x,e.y))}}e.LeviFractal=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(5);n(26),document.addEventListener("DOMContentLoaded",()=>{const t=document.createElement("canvas");document.body.appendChild(t),new i.Application(t)})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(6),o=n(1),s=n(7),r=n(24),c=n(25),a=n(2);e.Application=class{constructor(t){this.canvas=t,this.ctx=t.getContext("2d"),this.events=new r.EventSystem;const e=window.innerWidth,n=window.innerHeight+4;t.style.width=e+"px",t.style.height=n+"px",this.width=t.width=e,this.height=t.height=n,this.popup=new i.Popup(document.body,this.events),this.configurator=new c.Configurator(document.body,this.events),this.fractalTitle=document.createElement("div"),this.fractalTitle.className="fractal-title",document.body.appendChild(this.fractalTitle),this.fractalHelperMessage=document.createElement("div"),this.fractalHelperMessage.className="fractal-helper-message",this.index=-1,this.fractalTypes=a.objectKeys(o.FractalType),this.initHandlers(),this.nextFractal()}nextFractal(t=1){this.popup.isOpened()&&this.popup.hide();const e=this.index=(this.index+t+this.fractalTypes.length)%this.fractalTypes.length;this.fractalHelperMessageTimeout&&(clearTimeout(this.fractalHelperMessageTimeout),document.body.removeChild(this.fractalHelperMessage),this.fractalHelperMessageTimeout=null),this.fractal&&this.fractal.destroy();const n=this.fractalTypes[e];this.fractal=s.factory(o.FractalType[n],this.ctx,{width:this.width,height:this.height,events:this.events}),this.fractalTitle.textContent=n}initHandlers(){this.events.on(o.FractalEvent.refresh,()=>this.fractal.refresh()),this.events.on(o.FractalEvent.resume,()=>this.fractal.start()),this.events.on(o.FractalEvent.next,()=>this.nextFractal()),this.events.on(o.FractalEvent.requestConfig,()=>{this.events.fire(o.FractalEvent.showConfig,[this.fractal.config,this.fractal.getConfigHints()])}),this.events.on(o.FractalEvent.download,()=>{const t=this.canvas.toDataURL("impage/png"),e=document.createElement("a");e.href=t,e.download="fractal_"+Date.now()%Math.pow(2,8)+".png",window.location.href=t,e.click(),this.fractal.start()}),this.events.on(o.FractalEvent.updateConfig,t=>{this.fractal.updateConfig(t)}),this.events.on(o.FractalEvent.showHelp,(t,e=3e3)=>{this.fractalHelperMessageTimeout&&(clearTimeout(this.fractalHelperMessageTimeout),document.body.removeChild(this.fractalHelperMessage)),this.fractalHelperMessage.textContent=t,document.body.appendChild(this.fractalHelperMessage),this.fractalHelperMessageTimeout=setTimeout(()=>{document.body.removeChild(this.fractalHelperMessage),this.fractalHelperMessageTimeout=null},e)}),this.canvas.addEventListener("click",t=>this.showMenu(t)),this.canvas.addEventListener("mousewheel",t=>{t.deltaY<0?this.events.fire(o.FractalEvent.zoomIn,[t.pageX,t.pageY]):this.events.fire(o.FractalEvent.zoomOut,[t.pageX,t.pageY])}),this.canvas.addEventListener("contextmenu",t=>{t.preventDefault(),this.showMenu(t)}),document.addEventListener("keydown",t=>{switch(t.keyCode){case 27:this.popup.isOpened()?(this.popup.hide(),this.fractal.start()):this.configurator.isOpened()&&(this.configurator.hide(),this.fractal.start());break;case 37:this.configurator.isOpened()||this.nextFractal(-1);break;case 39:this.configurator.isOpened()||this.nextFractal()}})}showMenu(t){this.configurator.isOpened()||(this.fractal.stop(),this.events.fire(o.FractalEvent.showPopup,[t.pageX,t.pageY]),this.events.fire(o.FractalEvent.click,[t]))}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(1);e.Popup=class{constructor(t,e){this.container=t,this.events=e,this.events.on(i.FractalEvent.showPopup,(t,e)=>this.show(t,e));const n=document.createElement("div");n.className="control",n.innerHTML='\n            <div id="show-config">show config</div>\n            <div id="resume">resume</div>\n            <div id="download">download</div>\n            <div id="refresh">refresh</div>\n            <div id="next">next fractal</div>\n        '.trim(),n.onclick=t=>{switch(t.target.id){case"refresh":this.events.fire(i.FractalEvent.refresh),this.hide();break;case"resume":this.events.fire(i.FractalEvent.resume),this.hide();break;case"next":this.events.fire(i.FractalEvent.next),this.hide();break;case"show-config":this.events.fire(i.FractalEvent.requestConfig),this.hide();break;case"download":this.events.fire(i.FractalEvent.download),this.hide()}},this.control=n,this.container.appendChild(this.control)}isOpened(){return this.opened}show(t,e){if(this.opened||(this.control.classList.add("control__show"),this.opened=!0),this.lastX){if(Math.pow(Math.pow(this.lastX-t,2)+Math.pow(this.lastY-e,2),.5)<100)return}this.lastX=t,this.lastY=e;const n=this.control.getBoundingClientRect();t=Math.min(Math.max(0,t-n.width/2),window.innerWidth-n.width),e=Math.min(Math.max(0,e-n.height/2),window.innerHeight-n.height),this.control.style.left=t+"px",this.control.style.top=e+"px"}hide(){this.opened&&(this.opened=!1,this.control.classList.remove("control__show"),this.events.fire(i.FractalEvent.hidePopup))}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(1),o=n(8),s=n(9),r=n(10),c=n(11),a=n(12),h=n(3),l=n(13),u=n(14),f=n(15),d=n(16),p=n(17),g=n(18),y=n(19),x=n(20),v=n(21),w=n(22);e.factory=function(t,e,n){switch(t){case i.FractalType.prime:return new o.PrimeFractal(e,n);case i.FractalType.serpinski:return new r.SerpinskiFractal(e,n);case i.FractalType.t:return new s.TFractal(e,n);case i.FractalType.x:return new c.XFractal(e,n);case i.FractalType.mandelbrot:return new a.MandelbrotFractal(e,n);case i.FractalType.levi:return new h.LeviFractal(e,n);case i.FractalType.dragon:return new l.DragonFractal(e,n);case i.FractalType.koch:return new u.KochFractal(e,n);case i.FractalType.circle:return new f.CircleFractal(e,n);case i.FractalType.plane:return new d.PlaneFractal(e,n);case i.FractalType.spiral:return new p.SpiralFractal(e,n);case i.FractalType.randomPoint:return new g.RandomPointFractal(e,n);case i.FractalType.universe:return new y.Universe(e,n);case i.FractalType.tree:return new x.TreeFractal(e,n);case i.FractalType.pythagorasTree:return new v.PythagorasTree(e,n);case i.FractalType.primeNumber:return new w.PrimeNumberFractal(e,n)}}},function(t,e,n){"use strict";var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,s){function r(t){try{a(i.next(t))}catch(t){s(t)}}function c(t){try{a(i.throw(t))}catch(t){s(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,c)}a((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const o=n(0);class s extends o.BaseFractal{getOwnConfig(){return{drawCount:20,step:2}}getSequence(){return i(this,void 0,void 0,(function*(){return function*(t,e,n){let i=0,o=0,s=n,r=n,c=!0;for(;;){i>=t&&(s=-n),i<=0&&(s=n),o>=e&&(r=-n),o<=0&&(r=n);const a=i+s,h=o+r;c&&(yield{x1:i,y1:o,x2:a,y2:h}),c=!c,i=a,o=h}}(this.config.width,this.config.height,this.config.step)}))}onDrawStart(){this.ctx.beginPath()}onDrawEnd(){this.ctx.stroke()}drawObject({x1:t,y1:e,x2:n,y2:i}){this.ctx.moveTo(t,e),this.ctx.lineTo(n,i)}}e.PrimeFractal=s},function(t,e,n){"use strict";var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,s){function r(t){try{a(i.next(t))}catch(t){s(t)}}function c(t){try{a(i.throw(t))}catch(t){s(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,c)}a((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const o=n(0);class s extends o.BaseFractal{getOwnConfig(){return{drawCount:2e3,pattern:"0110,1001,1001,0110"}}getSequence(){return i(this,void 0,void 0,(function*(){const t=this.config.pattern.split(",").length;return function*(t,e,n){const i=n;for(;n<e;){for(let o=0;o<t;o+=n)for(let t=0;t<e;t+=n)yield{x:o,y:t,size:n/i};n*=2}}(this.config.width,this.config.height,t)}))}ctxGlobals(){this.ctx.fillStyle="rgba(0,0,0,0.3)"}onDrawStart(){this.ctx.beginPath()}onDrawEnd(){this.ctx.stroke()}drawObject({x:t,y:e,size:n}){const i=this.config.pattern.split(",");for(let o=0;o<i.length;o++)for(let s=0;s<i[o].length;s++)"1"===i[o][s]&&this.ctx.fillRect(t+n*o,e+n*s,n,n)}}e.TFractal=s},function(t,e,n){"use strict";var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,s){function r(t){try{a(i.next(t))}catch(t){s(t)}}function c(t){try{a(i.throw(t))}catch(t){s(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,c)}a((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const o=n(0);class s extends o.BaseFractal{getOwnConfig(){return{drawCount:400,edges:3,pointSize:.2}}getSequence(){return i(this,void 0,void 0,(function*(){return function*(t,e,n){const i=[];for(let o=0;o<n;o++){const n={x:r(t),y:r(e)};yield n,i.push(n)}let o=i[r(n)];for(;;){const t=i[r(n)],e=(t.x+o.x)/2,s=(t.y+o.y)/2;o={x:e,y:s},yield o}}(this.config.width,this.config.height,this.config.edges)}))}ctxGlobals(){this.ctx.fillStyle="#000"}drawObject({x:t,y:e}){this.ctx.beginPath(),this.ctx.arc(t,e,this.config.pointSize,0,2*Math.PI,!0),this.ctx.fill()}}function r(t){return Math.floor(Math.random()*t)}e.SerpinskiFractal=s},function(t,e,n){"use strict";var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,s){function r(t){try{a(i.next(t))}catch(t){s(t)}}function c(t){try{a(i.throw(t))}catch(t){s(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,c)}a((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const o=n(0);class s extends o.BaseFractal{getOwnConfig(){return{drawCount:40}}getSequence(){return i(this,void 0,void 0,(function*(){return function*(t,e){let n=t,i=e,o=[{x:n/2,y:i/2,sizeX:n,sizeY:i}];for(;;){for(let t=0;t<o.length;t++)yield o[t];n/=2,i/=2,o=o.reduce((t,e)=>(t.push({x:e.x+n/2,y:e.y+i/2,sizeX:n,sizeY:i},{x:e.x-n/2,y:e.y-i/2,sizeX:n,sizeY:i},{x:e.x+n/2,y:e.y-i/2,sizeX:n,sizeY:i}),t),[])}}(this.config.width,this.config.height)}))}ctxGlobals(){this.ctx.lineWidth=.2}onDrawStart(){this.ctx.beginPath()}onDrawEnd(){this.ctx.stroke()}drawObject({x:t,y:e,sizeX:n,sizeY:i}){this.ctx.moveTo(t-n/2,e),this.ctx.lineTo(t+n/2,e),this.ctx.moveTo(t,e-i/2),this.ctx.lineTo(t,e+i/2)}}e.XFractal=s},function(t,e,n){"use strict";var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,s){function r(t){try{a(i.next(t))}catch(t){s(t)}}function c(t){try{a(i.throw(t))}catch(t){s(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,c)}a((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const o=n(1),s=n(0);class r extends s.BaseFractal{constructor(){super(...arguments),this.scaleFactor=1}getOwnConfig(){return{drawCount:4,xCoords:[-1.9,.7],yCoords:[-1.2,1.2],iterations:100}}onInit(){this.events.fire(o.FractalEvent.showHelp,["Use mousewheel for zoom in and zoom out"])}getSequence(){return i(this,void 0,void 0,(function*(){return function*(t,e,{iterations:n,xCoords:[i,o],yCoords:[s,r]}){const l=(o-i)/t,u=(r-s)/e;let f=0;for(;f<t;){const o=Math.min(h,t-f),r=new Uint8ClampedArray(o*e*4);for(let t=0;t<=r.length;t+=4){const e=i+l*(t/4%o+f),h=s+u*~~(t/4/o);let d=0,p=0,g=0;do{const t=p*g;p=p*p-g*g+e,g=2*t+h,d++}while(d<n&&p*p+g*g<4);const[y,x,v,w]=d===n?c:a[d%16];r[t]=y,r[t+1]=x,r[t+2]=v,r[t+3]=w}yield{x:f,y:0,w:o,colorArray:r},f+=h}}(this.config.width,this.config.height,this.config)}))}getEvents(){return{[o.FractalEvent.zoomIn]:(t,e)=>this.scale(t,e,5),[o.FractalEvent.zoomOut]:(t,e)=>this.scale(t,e,.2)}}drawObject({x:t,y:e,w:n,colorArray:i}){const o=new ImageData(i,n);this.ctx.putImageData(o,t,e)}scale(t,e,n){this.scaleFactor/=n;const i=this.config.xCoords[1]-this.config.xCoords[0],o=this.config.yCoords[1]-this.config.yCoords[0],s=i*t/this.config.width+this.config.xCoords[0],r=o*e/this.config.height+this.config.yCoords[0];this.config.xCoords=[s-this.scaleFactor,s+this.scaleFactor],this.config.yCoords=[r-this.scaleFactor,r+this.scaleFactor],n>1?this.config.iterations+=50:this.config.iterations-=50,this.refresh()}}e.MandelbrotFractal=r;const c=[0,0,0,255],a=[[66,30,15,255],[25,7,26,255],[9,1,47,255],[4,4,73,255],[0,7,100,255],[12,44,138,255],[24,82,177,255],[57,125,209,255],[134,181,229,255],[211,236,248,255],[241,233,191,255],[248,201,95,255],[255,170,0,255],[204,128,0,255],[153,87,0,255],[106,52,3,255]],h=8},function(t,e,n){"use strict";var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,s){function r(t){try{a(i.next(t))}catch(t){s(t)}}function c(t){try{a(i.throw(t))}catch(t){s(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,c)}a((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const o=n(3);class s extends o.LeviFractal{getSequence(){return i(this,void 0,void 0,(function*(){return function*(t,e,n){const i=45*Math.PI/180,o=Math.cos(i),s=Math.sin(i);let r=[[{x:t/3,y:e/4},{x:2*t/3,y:e/4},1]],c=-1;for(;++c<n;){const t=[];yield{clear:!0,iteration:c+1};for(let e=0;e<r.length;e++){const[n,i,c]=r[e];yield{p1:n,p2:i};const{x:a,y:h}=n,{x:l,y:u}=i,f=l-a,d=u-h,p={x:o*(f*o-d*s*c)+a,y:o*(f*s*c+d*o)+h};t.push([n,p,1],[p,i,-1])}r=t}}(this.config.width,this.config.height,this.config.iterations)}))}}e.DragonFractal=s},function(t,e,n){"use strict";var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,s){function r(t){try{a(i.next(t))}catch(t){s(t)}}function c(t){try{a(i.throw(t))}catch(t){s(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,c)}a((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const o=n(0);class s extends o.BaseFractal{getOwnConfig(){return{drawCount:1,iterations:12}}ctxGlobals(){this.ctx.fillStyle="rgba(0, 0, 0, 0.7)"}getSequence(){return i(this,void 0,void 0,(function*(){return function*(t,e,n){const i=-Math.PI/3;let o=[{x1:t/3,y1:.675*e,x2:t/2,y2:.675*e-t*Math.sqrt(3)/6},{x1:t/2,y1:.675*e-t*Math.sqrt(3)/6,x2:2*t/3,y2:.675*e},{x1:2*t/3,y1:.675*e,x2:t/3,y2:.675*e}],s=-1;for(;++s<n;){yield{clear:!0,iteration:s};const t=[];for(let e=0;e<o.length;e++){yield o[e];const{x1:n,y1:s,x2:r,y2:c}=o[e],a=n+(r-n)/3,h=s+(c-s)/3,l=n+2*(r-n)/3,u=s+2*(c-s)/3,f=a+(l-a)*Math.cos(i)-(u-h)*Math.sin(i),d=h+(u-h)*Math.cos(i)+(l-a)*Math.sin(i);t.push({x1:n,y1:s,x2:a,y2:h},{x1:a,y1:h,x2:f,y2:d},{x1:f,y1:d,x2:l,y2:u},{x1:l,y1:u,x2:r,y2:c})}o=t}}(this.config.width,this.config.height,this.config.iterations)}))}onDrawStart(){this.ctx.beginPath()}onDrawEnd(){this.ctx.stroke()}drawObject({x1:t,y1:e,x2:n,y2:i,clear:o,iteration:s}){o?(this.ctx.stroke(),this.clear(),this.ctx.fillText(s+" iteration",20,30),this.ctx.beginPath()):(this.ctx.moveTo(t,e),this.ctx.lineTo(n,i))}}e.KochFractal=s},function(t,e,n){"use strict";var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,s){function r(t){try{a(i.next(t))}catch(t){s(t)}}function c(t){try{a(i.throw(t))}catch(t){s(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,c)}a((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const o=n(0);class s extends o.BaseFractal{getOwnConfig(){return{drawCount:1,points:360,iterations:20}}getSequence(){return i(this,void 0,void 0,(function*(){return function*(t,e,n,i){const o={x:t/2,y:e/2},s=e/2-40,r=t=>{const e=t%n/n;return{x:o.x+Math.cos(2*Math.PI*e)*s,y:o.y+Math.sin(2*Math.PI*e)*s}};let c=2;for(;i--;){yield{clear:!0};for(let t=1;t<n;t++)yield{p1:r(t),p2:r(t*c)};c++}}(this.config.width,this.config.height,this.config.points,this.config.iterations)}))}onDrawStart(){this.ctx.beginPath()}onDrawEnd(){this.ctx.stroke()}drawObject({p1:t,p2:e,clear:n}){n?(this.ctx.stroke(),this.clear(),this.ctx.beginPath()):(this.ctx.moveTo(t.x,t.y),this.ctx.lineTo(e.x,e.y))}}e.CircleFractal=s},function(t,e,n){"use strict";var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,s){function r(t){try{a(i.next(t))}catch(t){s(t)}}function c(t){try{a(i.throw(t))}catch(t){s(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,c)}a((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const o=n(0);class s extends o.BaseFractal{getOwnConfig(){return{drawCount:250,roughness:1.2}}getSequence(){return i(this,void 0,void 0,(function*(){return function*(t,e,n){const i=Math.pow(2,~~Math.log2(e))+1,o=Array.from({length:i},t=>Array.from({length:i})),s=(t-i)/2,r=(e-i)/2,c=t=>-.5*t+Math.random()*t,a=(...t)=>t.reduce((t,e)=>t+e)/t.length,h=t=>`hsl(${Math.floor(t+180)},50%,50%)`;o[0][0]=c(360),o[0][i-1]=c(360),o[i-1][0]=c(360),o[i-1][i-1]=c(360),yield{x:s,y:r,color:h(o[0][0])},yield{x:s,y:i-1+r,color:h(o[0][i-1])},yield{x:i-1+s,y:r,color:h(o[i-1][0])},yield{x:i-1+s,y:i-1+r,color:h(o[i-1][i-1])};let l=i>>1;function*u(t){for(let e=l;e<i;e+=2*l)for(let o=l;o<i;o+=2*l)t[e][o]=a(t[e-l][o-l],t[e-l][o+l],t[e+l][o-l],t[e+l][o+l])+c(360)/i*l*n,yield{x:e+s,y:o+r,color:h(t[e][o])}}function*f(t){for(let e=0;e<i;e+=l)for(let o=0;o<i;o+=l){if(t[e][o])continue;const u=[];t[e-l]&&u.push(t[e-l][o]),t[e+l]&&u.push(t[e+l][o]),t[e][o-l]&&u.push(t[e][o-l]),t[e][o+l]&&u.push(t[e][o+l]),t[e][o]=a(...u)+c(360)/i*l*n,yield{x:e+s,y:o+r,color:h(t[e][o])}}}for(;l>=1;){const t=u(o);for(const e of t)yield e;const e=f(o);for(const t of e)yield t;l>>=1}}(this.config.width,this.config.height,this.config.roughness)}))}drawObject({x:t,y:e,color:n}){this.ctx.beginPath(),this.ctx.fillStyle=n,this.ctx.arc(t,e,1,0,2*Math.PI,!0),this.ctx.fill()}}e.PlaneFractal=s},function(t,e,n){"use strict";var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,s){function r(t){try{a(i.next(t))}catch(t){s(t)}}function c(t){try{a(i.throw(t))}catch(t){s(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,c)}a((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const o=n(0);class s extends o.BaseFractal{getOwnConfig(){return{drawCount:50}}getMode(){return"night"}getSequence(){return i(this,void 0,void 0,(function*(){return function*(t,e){const n=t/2,i=e/2;let o={x:n,y:i};for(let t=0;t<4e3;t++){const e=.1*t,s={x:n+(1+e)*Math.cos(e),y:i+(1+e)*Math.sin(e)};yield{a1:o,a2:s},o=s}}(this.config.width,this.config.height)}))}onDrawStart(){this.ctx.beginPath()}onDrawEnd(){this.ctx.stroke()}drawObject({a1:t,a2:e}){this.ctx.moveTo(t.x,t.y),this.ctx.lineTo(e.x,e.y)}}e.SpiralFractal=s},function(t,e,n){"use strict";var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,s){function r(t){try{a(i.next(t))}catch(t){s(t)}}function c(t){try{a(i.throw(t))}catch(t){s(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,c)}a((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const o=n(0);class s extends o.BaseFractal{getOwnConfig(){return{drawCount:400,radius:5}}ctxGlobals(){this.ctx.fillStyle="rgba(0, 0, 0, 0.7)"}getSequence(){return i(this,void 0,void 0,(function*(){return function*(t,e,n){let i=t/2,o=e/2;yield{x:i,y:o};for(;;){const s=Math.random(),r=i+Math.cos(2*Math.PI*s)*n,c=o+Math.sin(2*Math.PI*s)*n;r>t||c>e||r<0||c<0||(i=r,o=c,yield{x:i,y:o})}}(this.config.width,this.config.height,this.config.radius)}))}drawObject({x:t,y:e}){this.ctx.beginPath(),this.ctx.arc(t,e,1,0,2*Math.PI,!0),this.ctx.fill()}}e.RandomPointFractal=s},function(t,e,n){"use strict";var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,s){function r(t){try{a(i.next(t))}catch(t){s(t)}}function c(t){try{a(i.throw(t))}catch(t){s(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,c)}a((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const o=n(0);class s extends o.BaseFractal{getOwnConfig(){return{drawCount:100}}getMode(){return"night"}getSequence(){return i(this,void 0,void 0,(function*(){return function*(t,e){const n={x:t/2,y:e/2,radius:40,ring:100,color:255};yield n;let i=[n];for(;i.length<1e4;){const n=[];for(let o=0;o<i.length;o++){const{x:s,y:c,radius:a,color:h,ring:l}=i[o],u=r(1,8);for(let i=0;i<u;i++){const o=(i+1)/u,f={x:s+Math.cos(2*Math.PI*o)*l,y:c+Math.sin(2*Math.PI*o)*l,radius:r(a/6,a),color:Math.round(h/(1+.3*Math.random())),ring:Math.round(h/(1+Math.random()))};f.x>t||f.x<0||f.y>e||f.y<0||(n.push(f),yield f)}}i=n}}(this.config.width,this.config.height)}))}drawObject({x:t,y:e,radius:n,color:i}){this.ctx.beginPath(),this.ctx.fillStyle=`rgba(${i}, ${i}, ${i}, 0.5)`,this.ctx.arc(t,e,n,0,2*Math.PI,!0),this.ctx.fill()}}function r(t,e){return t+Math.round(Math.random()*(e-t))}e.Universe=s},function(t,e,n){"use strict";var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,s){function r(t){try{a(i.next(t))}catch(t){s(t)}}function c(t){try{a(i.throw(t))}catch(t){s(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,c)}a((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const o=n(0);class s extends o.BaseFractal{getOwnConfig(){return{drawCount:1,angle:60}}getMode(){return"night"}getSequence(){return i(this,void 0,void 0,(function*(){return function*(t,e,n){let i=.6*e,o=15;n=Math.PI*n/180;let s=[{x1:t/2,y1:e,x2:t/2,y2:e-i,angle:Math.PI/2,lineWidth:o}];for(;i>1;){i/=1.8,o/=1.4;const t=[];for(const e of s)yield e,t.push({x1:e.x2,y1:e.y2,x2:e.x2+i*Math.cos(e.angle+n),y2:e.y2+i*Math.sin(e.angle+n),lineWidth:o,angle:e.angle+n},{x1:e.x2,y1:e.y2,x2:e.x2+i*Math.cos(e.angle-n),y2:e.y2+i*Math.sin(e.angle-n),lineWidth:o,angle:e.angle-n});s=t}}(this.config.width,this.config.height,this.config.angle)}))}onDrawStart(){this.ctx.beginPath()}onDrawEnd(){this.ctx.stroke()}drawObject({x1:t,x2:e,y1:n,y2:i,lineWidth:o}){this.ctx.lineWidth=o,this.ctx.moveTo(t,n),this.ctx.lineTo(e,i)}}e.TreeFractal=s},function(t,e,n){"use strict";var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,s){function r(t){try{a(i.next(t))}catch(t){s(t)}}function c(t){try{a(i.throw(t))}catch(t){s(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,c)}a((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const o=n(0);class s extends o.BaseFractal{getMode(){return"night"}getOwnConfig(){return{drawCount:10,depth:13}}getSequence(){return i(this,void 0,void 0,(function*(){const t=.1*this.config.width;return function*(t,e,n,i){let o=1;const s=(t-n)/2;let a=[[s,.85*e,s+n,.85*e]];for(;o<i;){const t=[];for(const[e,n,s,h]of a){const a=s-e,l=n-h,u=s-l,f=h-a,d=e-l,p=n-a,g=d+.5*(a-l),y=p-.5*(a+l);yield{points:[r(e,n),r(s,h),r(u,f),r(d,p)],fill:c(2*o,2*i)},yield{points:[r(u,f),r(d,p),r(g,y)],fill:c(2*o+1,2*i)},t.push([d,p,g,y],[g,y,u,f])}o++,a=t}}(this.config.width,this.config.height,t,this.config.depth)}))}drawObject({points:[t,...e],fill:n}){this.ctx.beginPath(),this.ctx.moveTo(t.x,t.y);for(const{x:t,y:i}of e)this.ctx.lineTo(t,i),this.ctx.fillStyle=n,this.ctx.fill();this.ctx.closePath()}}e.PythagorasTree=s;const r=(t,e)=>({x:t,y:e}),c=(t,e)=>`hsl(${~~(t/e*360)},40%,60%)`},function(t,e,n){"use strict";var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,s){function r(t){try{a(i.next(t))}catch(t){s(t)}}function c(t){try{a(i.throw(t))}catch(t){s(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,c)}a((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const o=n(0),s=n(23),r={"&":(t,e)=>t&e,"|":(t,e)=>t|e,"^":(t,e)=>t^e};class c extends o.BaseFractal{getConfigHints(){return{type:["&","|","^"]}}getOwnConfig(){return{drawCount:1,type:"^",red:0,green:255,blue:255,alpha:255}}getSequence(){return i(this,void 0,void 0,(function*(){return function*(t,e,{red:n,green:i,blue:o,alpha:c,type:h}){let l=0;const u=s.getPrimesMap(t*e),f=r[h]||r["&"];for(;l<t;){const s=Math.min(a,t-l),r=new Uint8ClampedArray(s*e*4);for(let t=0;t<=r.length;t+=4){u[f(t/4%s+l,~~(t/4/s))]&&(r[t]=n,r[t+1]=i,r[t+2]=o,r[t+3]=c)}yield{x:l,y:0,w:s,colorArray:r},l+=a}}(this.config.width,this.config.height,this.config)}))}drawObject({x:t,y:e,w:n,colorArray:i}){const o=new ImageData(i,n);this.ctx.putImageData(o,t,e)}}e.PrimeNumberFractal=c;const a=8},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getPrimesMap=function(t){const e=Array(1+~~(t/31)).fill(0),n=t=>Boolean(e[~~(t/31)]&1<<t%31);for(let o=3;o<~~Math.sqrt(t);o+=2)if(!n(o))for(let n=o*o,s=o<<1;n<t;n+=s)e[~~((i=n)/31)]|=1<<i%31;var i;const o={2:!0};for(let e=3;e<=t;e+=2)n(e)||(o[e]=!0);return o}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.EventSystem=class{constructor(t){this.events={},this.context=t||this}on(t,e,n,i){this.events[t]=this.events[t]||[],this.events[t].push({callback:e,context:n||this.context,once:i})}detach(t,e){this.events[t]&&(this.events[t]=e?this.events[t].filter(t=>t.context!==e):[])}fire(t,e){if(void 0===e&&(e=[]),this.events[t]){const n=[],i=this.events[t].map(i=>(i.once&&n.push({name:t,context:i.context}),i.callback.apply(i.context,e)));return n.forEach(({name:t,context:e})=>this.detach(t,e)),i.indexOf(!1)<0}return!0}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(1);e.Configurator=class{constructor(t,e){this.container=t,this.events=e,this.inputs=[],this.events.on(i.FractalEvent.showConfig,(t,e)=>this.show(t,e))}isOpened(){return this.opened}show(t,e={}){if(this.opened)return;this.opened=!0;const n=[],o=this.configurator=document.createElement("div");o.className="configurator";const s=document.createElement("div");s.className="configurator__header",s.textContent="Configuration",o.appendChild(s);for(const i in t){if("width"===i||"height"===i||t[i]instanceof Object)continue;const s=document.createElement("div");s.className="property";const r=document.createElement("div");r.className="property__name",r.textContent=i,s.appendChild(r);const c=e[i]?document.createElement("select"):document.createElement("input");c.id=i,c.value=t[i],n.push(c);const a=e[i];if(a){for(const e of a){const n=document.createElement("option");n.value=e,n.textContent=e,n.selected=t[i]===e,c.appendChild(n)}s.appendChild(c)}else s.appendChild(c);o.appendChild(s)}this.inputs=n;const r=document.createElement("div");r.className="buttons";const c=document.createElement("button");c.textContent="update",c.onclick=()=>{this.events.fire(i.FractalEvent.updateConfig,[this.getConfig()]),this.hide()};const a=document.createElement("button");a.onclick=()=>{this.events.fire(i.FractalEvent.resume),this.hide()},a.textContent="close",r.appendChild(c),r.appendChild(a),o.appendChild(r),this.container.appendChild(o)}hide(){this.opened=!1,this.inputs=[],this.container.removeChild(this.configurator)}getConfig(){const t={};for(const e of this.inputs)t[e.id]=+e.value||e.value;return t}}},function(t,e,n){}]);